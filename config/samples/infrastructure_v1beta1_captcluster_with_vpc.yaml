apiVersion: infrastructure.cluster.x-k8s.io/v1beta1
kind: CAPTVPCTemplate
metadata:
  name: example-vpc
spec:
  cidr: "10.0.0.0/16"
  enableNatGateway: true
  singleNatGateway: true
  publicSubnetTags:
    "kubernetes.io/role/elb": "1"
  privateSubnetTags:
    "kubernetes.io/role/internal-elb": "1"
    "karpenter.sh/discovery": "${local.name}"
  tags:
    Environment: "dev"
    Terraform: "true"
    Project: "example"
---
apiVersion: infrastructure.cluster.x-k8s.io/v1beta1
kind: CAPTCluster
metadata:
  name: example-cluster
spec:
  region: ap-northeast-1
  networkRef:
    apiVersion: infrastructure.cluster.x-k8s.io/v1beta1
    kind: CAPTVPCTemplate
    name: example-vpc
  eks:
    version: "1.31"
    publicAccess: true
    privateAccess: false
  addons:
    coredns:
      enabled: true
    vpcCni:
      enabled: true
    kubeProxy:
      enabled: true
  karpenter:
    enabled: true
