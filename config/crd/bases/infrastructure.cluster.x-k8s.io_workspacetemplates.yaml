---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.16.1
  name: workspacetemplates.infrastructure.cluster.x-k8s.io
spec:
  group: infrastructure.cluster.x-k8s.io
  names:
    kind: WorkspaceTemplate
    listKind: WorkspaceTemplateList
    plural: workspacetemplates
    singular: workspacetemplate
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - jsonPath: .status.workspaceName
      name: WORKSPACE
      type: string
    - jsonPath: .metadata.creationTimestamp
      name: AGE
      type: date
    name: v1beta1
    schema:
      openAPIV3Schema:
        description: WorkspaceTemplate is the Schema for the workspacetemplates API
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: WorkspaceTemplateSpec defines the desired state of WorkspaceTemplate
            properties:
              template:
                description: Template defines the workspace template
                properties:
                  metadata:
                    description: Metadata contains template-specific metadata
                    properties:
                      description:
                        description: Description provides a human-readable description
                          of the template
                        type: string
                      tags:
                        additionalProperties:
                          type: string
                        description: Tags are key-value pairs that can be used to
                          organize and categorize templates
                        type: object
                      version:
                        description: Version specifies the version of this template
                        type: string
                    type: object
                  spec:
                    description: Spec defines the desired state of the workspace
                    properties:
                      applyArgs:
                        description: Arguments to be included in the terraform apply
                          CLI command
                        items:
                          type: string
                        type: array
                      destroyArgs:
                        description: Arguments to be included in the terraform destroy
                          CLI command
                        items:
                          type: string
                        type: array
                      enableTerraformCLILogging:
                        description: Boolean value to indicate  CLI logging of terraform
                          execution is enabled or not
                        type: boolean
                      entrypoint:
                        default: ""
                        description: Entrypoint for `terraform init` within the module
                        type: string
                      env:
                        description: Environment variables.
                        items:
                          description: An EnvVar specifies an environment variable
                            to be set for the workspace.
                          properties:
                            configMapKeyRef:
                              description: A ConfigMap key containing the desired
                                env var value.
                              properties:
                                key:
                                  description: Key within the referenced resource.
                                  type: string
                                name:
                                  description: Name of the referenced resource.
                                  type: string
                                namespace:
                                  description: Namespace of the referenced resource.
                                  type: string
                              required:
                              - key
                              - name
                              - namespace
                              type: object
                            name:
                              type: string
                            secretKeyRef:
                              description: A Secret key containing the desired env
                                var value.
                              properties:
                                key:
                                  description: Key within the referenced resource.
                                  type: string
                                name:
                                  description: Name of the referenced resource.
                                  type: string
                                namespace:
                                  description: Namespace of the referenced resource.
                                  type: string
                              required:
                              - key
                              - name
                              - namespace
                              type: object
                            value:
                              type: string
                          required:
                          - name
                          type: object
                        type: array
                      initArgs:
                        description: Arguments to be included in the terraform init
                          CLI command
                        items:
                          type: string
                        type: array
                      inlineFormat:
                        description: |-
                          Specifies the format of the inline Terraform content
                          if Source is 'Inline'
                        enum:
                        - HCL
                        - JSON
                        type: string
                      module:
                        description: |-
                          The root module of this workspace; i.e. the module containing its main.tf
                          file. When the workspace's source is 'Remote' (the default) this can be
                          any address supported by terraform init -from-module, for example a git
                          repository or an S3 bucket. When the workspace's source is 'Inline' the
                          content of a simple main.tf or main.tf.json file may be written inline.
                        type: string
                      planArgs:
                        description: Arguments to be included in the terraform plan
                          CLI command
                        items:
                          type: string
                        type: array
                      source:
                        description: Source of the root module of this workspace.
                        enum:
                        - Remote
                        - Inline
                        type: string
                      varFiles:
                        description: |-
                          Files of configuration variables. Explicitly declared vars take
                          precedence.
                        items:
                          description: A VarFile is a file containing many Terraform
                            variables.
                          properties:
                            configMapKeyRef:
                              description: A ConfigMap key containing the vars file.
                              properties:
                                key:
                                  description: Key within the referenced resource.
                                  type: string
                                name:
                                  description: Name of the referenced resource.
                                  type: string
                                namespace:
                                  description: Namespace of the referenced resource.
                                  type: string
                              required:
                              - key
                              - name
                              - namespace
                              type: object
                            format:
                              default: HCL
                              description: Format of this vars file.
                              enum:
                              - HCL
                              - JSON
                              type: string
                            secretKeyRef:
                              description: A Secret key containing the vars file.
                              properties:
                                key:
                                  description: Key within the referenced resource.
                                  type: string
                                name:
                                  description: Name of the referenced resource.
                                  type: string
                                namespace:
                                  description: Namespace of the referenced resource.
                                  type: string
                              required:
                              - key
                              - name
                              - namespace
                              type: object
                            source:
                              description: Source of this vars file.
                              enum:
                              - ConfigMapKey
                              - SecretKey
                              type: string
                          required:
                          - source
                          type: object
                        type: array
                      varmap:
                        description: Terraform Variable Map. Should be a valid JSON
                          representation of the input vars
                        type: object
                        x-kubernetes-preserve-unknown-fields: true
                      vars:
                        description: Configuration variables.
                        items:
                          description: A Var represents a Terraform configuration
                            variable.
                          properties:
                            key:
                              type: string
                            value:
                              type: string
                          required:
                          - key
                          - value
                          type: object
                        type: array
                    required:
                    - module
                    - source
                    type: object
                required:
                - spec
                type: object
              writeConnectionSecretToRef:
                description: |-
                  WriteConnectionSecretToRef specifies the namespace and name of a
                  Secret to which any connection details for this managed resource should
                  be written.
                properties:
                  name:
                    description: Name of the secret.
                    type: string
                  namespace:
                    description: Namespace of the secret.
                    type: string
                required:
                - name
                - namespace
                type: object
            required:
            - template
            type: object
          status:
            description: WorkspaceTemplateStatus defines the observed state of WorkspaceTemplate
            properties:
              conditions:
                description: Conditions of the resource.
                items:
                  description: A Condition that may apply to a resource.
                  properties:
                    lastTransitionTime:
                      description: |-
                        LastTransitionTime is the last time this condition transitioned from one
                        status to another.
                      format: date-time
                      type: string
                    message:
                      description: |-
                        A Message containing details about this condition's last transition from
                        one status to another, if any.
                      type: string
                    observedGeneration:
                      description: |-
                        ObservedGeneration represents the .metadata.generation that the condition was set based upon.
                        For instance, if .metadata.generation is currently 12, but the .status.conditions[x].observedGeneration is 9, the condition is out of date
                        with respect to the current state of the instance.
                      format: int64
                      type: integer
                    reason:
                      description: A Reason for this condition's last transition from
                        one status to another.
                      type: string
                    status:
                      description: Status of this condition; is it currently True,
                        False, or Unknown?
                      type: string
                    type:
                      description: |-
                        Type of this condition. At most one of each condition type may apply to
                        a resource at any point in time.
                      type: string
                  required:
                  - lastTransitionTime
                  - reason
                  - status
                  - type
                  type: object
                type: array
              workspaceName:
                description: WorkspaceName is the name of the created Terraform Workspace
                type: string
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
